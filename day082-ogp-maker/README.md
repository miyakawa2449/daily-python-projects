# 🎨 day82-ogp-maker

## 📋 アプリケーション名
**OGP画像ジェネレーター**

## 🎯 アプリケーション概要
ブログ記事やWebサイト用のOGP（Open Graph Protocol）画像を自動生成するPythonアプリケーションです。テキストを入力するだけで、SNSシェア時に表示される美しいOGP画像を簡単に作成できます。フォントの自動選択、色のカスタマイズ、一括生成機能を搭載しています。

## 📁 ファイル構成
```
day82-ogp-maker/
├── ogp_generator.py     # メインスクリプト
├── README.md           # このファイル
├── ogp.png            # 生成されたOGP画像（実行後作成）
├── ogp_custom_*.png   # カスタマイズされたOGP画像
├── ogp_batch_*.png    # 一括生成されたOGP画像
└── fonts/             # カスタムフォントフォルダ（オプション）
    └── NotoSansJP-Bold.ttf
```

## 🔧 必要なライブラリ
```bash
pip install Pillow
```

## 🚀 実行方法
```bash
# プロジェクトディレクトリに移動
cd day82-ogp-maker

# スクリプトを実行
python ogp_generator.py
```

## 💻 使い方

### 1️⃣ **基本的な使い方**
```bash
python ogp_generator.py
```

実行すると以下のように対話形式で進みます：
```
🎨 OGP画像ジェネレーター
========================================
📝 タイトルを入力してください: Python学習ブログ

🚀 基本設定で生成中...
✅ フォント使用: ヒラギノ角ゴシック W6.ttc
📏 テキストサイズ: 456x72
📍 テキスト位置: (372, 279)
✅ 画像を保存しました: ogp.png
📊 ファイルサイズ: 15,234 bytes

🎨 カスタマイズしますか？ (y/n): y

⚙️ カスタム設定
--------------------
🎨 背景色 (例: #ff5733, デフォルト: #1e1e1e): #2c3e50
✏️ 文字色 (例: #ffffff, デフォルト: #ffffff): #ecf0f1
📏 フォントサイズ (例: 80, デフォルト: 64): 72

🚀 カスタム設定で生成中...
✅ 画像を保存しました: ogp_custom_Python学習.png
```

### 2️⃣ **プログラムから直接呼び出し**
```python
from ogp_generator import generate_ogp, batch_generate

# 基本的な生成
generate_ogp("ブログタイトル")

# カスタマイズして生成
generate_ogp(
    "カスタムOGP", 
    "custom.png",
    background_color="#3498db",
    text_color="#ffffff",
    font_size=80
)

# 複数タイトルを一括生成
titles = [
    "Python入門講座",
    "Webスクレイピング基礎",
    "データ分析の始め方"
]
batch_generate(titles, background_color="#2c3e50", font_size=70)
```

## 🛠️ 機能

### ✅ **基本機能**
- **テキスト中央配置**: タイトルを画像中央に自動配置
- **OGPサイズ対応**: 1200×630pxの標準OGPサイズで生成
- **フォント自動選択**: システムフォントを自動検出・選択
- **カラーカスタマイズ**: 背景色・文字色の自由設定

### ✅ **高度な機能**
- **フォントフォールバック**: カスタム→システム→デフォルトの順で自動選択
- **一括生成**: 複数タイトルの効率的な処理
- **エラーハンドリング**: ファイル保存・フォント読み込みの安全処理
- **詳細ログ**: 生成過程の可視化

### ✅ **対応フォント**
```
優先度順：
1. fonts/NotoSansJP-Bold.ttf        # カスタムフォント
2. ヒラギノ角ゴシック W6.ttc         # Mac標準
3. Arial.ttf                       # Mac標準
4. msgothic.ttc                    # Windows標準
5. arial.ttf                       # Windows標準
6. デフォルトフォント                # 最終フォールバック
```

## 🎨 カスタマイズオプション

### 📐 **サイズ設定**
- **幅**: 1200px（固定）
- **高さ**: 630px（固定）
- **フォントサイズ**: 16〜200px（推奨：64px）

### 🌈 **カラー設定**
```python
# 人気の配色例
background_colors = {
    "ダーク": "#1e1e1e",
    "ブルー": "#3498db", 
    "レッド": "#e74c3c",
    "グリーン": "#27ae60",
    "パープル": "#9b59b6"
}
```

### 📝 **テキスト最適化**
- **推奨文字数**: 10〜30文字
- **改行**: 自動改行なし（単行表示）
- **文字エンコーディング**: UTF-8対応

## 📊 使用例

### 🌟 **ブログ記事用**
```python
# 技術ブログ
generate_ogp(
    "PythonでWebスクレイピング入門",
    "tech_blog.png",
    background_color="#2c3e50",
    text_color="#ecf0f1",
    font_size=68
)

# デザインブログ  
generate_ogp(
    "UI/UXデザインの基本原則",
    "design_blog.png", 
    background_color="#e74c3c",
    text_color="#ffffff",
    font_size=64
)
```

### 📦 **月間記事一括生成**
```python
monthly_posts = [
    "2025年1月のWebトレンド",
    "React Hooks完全ガイド",
    "TypeScript実践的活用法",
    "パフォーマンス最適化入門",
    "モダンCSS設計パターン"
]

batch_generate(
    monthly_posts,
    background_color="#34495e",
    text_color="#ecf0f1", 
    font_size=66
)
```

## ⚠️ 注意事項

### 📝 **フォント関連**
- **カスタムフォント**: `fonts/`フォルダにTrueTypeフォント(.ttf)を配置
- **日本語表示**: システムフォントがない場合、デフォルトフォントでは日本語が正しく表示されない可能性
- **フォントライセンス**: 商用利用時はフォントのライセンスを確認

### 🎨 **デザイン関連**
- **テキスト長**: 長すぎるテキストは画像からはみ出る可能性
- **コントラスト**: 背景色と文字色のコントラストを適切に設定
- **解像度**: 1200×630pxの固定サイズ

### 💾 **ファイル関連**
- **上書き注意**: 同名ファイルは上書きされます
- **ファイル形式**: PNG形式で出力（透明度なし）

## 🐛 トラブルシューティング

### ❌ **フォントエラー**
```
IOError: cannot open resource
```
**解決方法**:
- システムフォントパスを確認
- カスタムフォントを`fonts/`フォルダに配置
- フォントファイルの権限を確認

### ❌ **文字化け**
```
日本語が正しく表示されない
```
**解決方法**:
- 日本語対応フォントを使用
- NotoSansCJK等の多言語フォントを`fonts/`に配置

### ❌ **メモリエラー**
```
MemoryError: 大量一括生成時
```
**解決方法**:
- バッチサイズを小さくする
- 不要な画像ファイルを削除

## 📖 学んだことや今後の改善案（学習ログ）

### ✅ **学んだこと**

#### 🎨 **PIL/Pillow画像処理**
- **Image.new()**: 基本的な画像キャンバス作成
- **ImageDraw**: テキスト描画とグラフィック要素追加
- **ImageFont**: フォント読み込みとフォールバック処理
- **textbbox()**: Pillow 8.0以降の新しいテキストサイズ測定方法

#### 🔤 **フォント管理システム**
- **マルチプラットフォーム対応**: Mac/Windows/Linuxの標準フォント
- **フォントフォールバック**: 優先順位付きフォント選択
- **カスタムフォント**: TTFファイルの動的読み込み

#### 🎯 **オブジェクト指向設計**
- **クラス設計**: 設定とメソッドの適切な分離
- **メソッド分割**: 単一責任の原則に基づく機能分割
- **エラーハンドリング**: try-except文での安全な処理

#### 📐 **レイアウト計算**
- **中央配置算法**: テキストボックスサイズからの位置計算
- **テキスト測定**: バウンディングボックスを使った精密な測定

### 🚀 **今後の改善案**

#### 🔥 **優先度高**
- [ ] **テンプレート機能**: 背景画像を使用したOGP生成
- [ ] **改行対応**: 長いテキストの自動改行処理
- [ ] **レスポンシブフォント**: テキスト長に応じた自動フォントサイズ調整
- [ ] **プレビュー機能**: 生成前のリアルタイムプレビュー

#### 🌟 **優先度中**
- [ ] **GUI化**: tkinterまたはStreamlitでのWebインターフェース
- [ ] **画像フィルター**: ドロップシャドウ、グラデーション効果
- [ ] **レイアウトオプション**: 左寄せ、右寄せ、カスタム位置指定
- [ ] **ブランディング機能**: ロゴ挿入、定型フッター追加

#### 💡 **優先度低（発展）**
- [ ] **AIタイトル生成**: OpenAI APIを使った魅力的なタイトル提案
- [ ] **A/Bテスト機能**: 複数バージョンの同時生成・比較
- [ ] **SNS最適化**: Twitter、Facebook、LinkedIn各プラットフォーム用サイズ
- [ ] **動画OGP**: アニメーション付きOGP画像生成

#### 🔧 **技術的改善**
- [ ] **設定ファイル**: JSON/YAMLによる設定外部化
- [ ] **プラグインシステム**: エフェクト・フィルターの追加機能
- [ ] **バッチ処理改善**: 並列処理による高速化
- [ ] **クラウド連携**: S3等への自動アップロード機能

### 🎯 **技術的課題と解決策**
```
課題: 長いタイトルが画像からはみ出る
解決策: テキスト幅チェック + 自動改行 + フォントサイズ調整

課題: 日本語フォントの環境依存性
解決策: WebフォントAPI利用 or 推奨フォントの同梱配布

課題: 大量生成時のメモリ使用量
解決策: 生成後の即座な画像解放 + ストリーミング処理
```

### 📚 **参考になったリソース**
- [Pillow Documentation](https://pillow.readthedocs.io/)
- [Open Graph Protocol](https://ogp.me/)
- [Google Fonts](https://fonts.google.com/)
- [Color Hunt - カラーパレット](https://colorhunt.co/)

### 🏆 **プロジェクト成果**
- **コード行数**: 約200行
- **実装時間**: 約3-4時間
- **テストケース**: 基本生成、カスタマイズ、一括生成
- **プラットフォーム**: Mac/Windows/Linux対応

---
**🎉 プロジェクト完成日**: 2025年7月20日  
**⚡ 実装時間**: 約3-4時間  
**🛠️ 使用技術**: Python, PIL/Pillow, OOP, File I/O